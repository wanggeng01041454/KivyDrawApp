#:kivy 2.1.1

# 颜色选择器对话框
<popup>:
    id : pop
    title: 'Color Select'
    size_hint: None, None
    size: 400,400
    auto_dismiss: False
    Cpicker:
        on_color: root.hello(self.color)
        Button:
            text: 'Select'
            pos_hint: {'center_x': .76, 'y': .03}
            size_hint: None, None
            size: 100, 50
            on_press: root.dismiss()




# 主界面
<MainScreen>:
    name: 'main'
    painter: painter
    color_button: color_button
    QwtPainterWidget:
        id: painter
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'

        MDBoxLayout:
            orientation: "horizontal"
            size_hint_x: 0.8
            adaptive_height: True
            spacing: 10

            # MDSlider:
            #     hint: False
            #     step : 0.1
            #     value: 1
            #     min: 1
            #     max: 20
            #     on_value : root.on_width_change(args[1])
            ColorCircularButton:
                # 关闭显示边框
                display_border: False
                id: color_button
                on_press: root.open_it1()

            MDIconButton:
                icon: 'res/imgs/pencil.png'
                icon_size: 64
                line_width: 1
                line_color: 0, 0, 0, 1
                on_press: root.on_select_pencil()

            MDIconButton:
                icon: 'res/imgs/eraser.png'
                icon_size: 64
                on_press: root.eraser()

            MDIconButton:
                icon: 'res/imgs/trash-can.png'
                icon_size: 64
                on_release:painter.canvas.clear() ; painter.canvas.after.clear()

            Button:
                # pos: root.width*(0.8),root.height *(0.151)
                on_press: root.sl()
                background_normal: 'res/imgs/line.png'

            Button:
                # pos: root.width*(0.8),root.height *(0.302)
                on_press: root.on_select_rect()
                background_normal: 'res/imgs/rectangle.png'

            Button:
                pos: root.width*(0.8),0
                text: 'Color Select'
                on_press: root.open_it1()
